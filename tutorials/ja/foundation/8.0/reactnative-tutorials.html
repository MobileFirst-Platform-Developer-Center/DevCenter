---
layout: tutorial
title: Developing for React Native
show_disqus: false
use_dropdown: false
print_pdf: false
show_in_nav: false
indexed: false
---
<!-- NLS_CHARSET=UTF-8 -->
<head>
<style>
.tab-pane {

    border-left: 1px solid #ddd;
    border-right: 1px solid #ddd;
    border-bottom: 1px solid #ddd;
    border-radius: 0px 0px 5px 5px;
    padding: 10px;
}

.nav-tabs {
    margin-bottom: 0;
}
</style>
</head>
<br>
以下のチュートリアルに従って React Native アプリケーションを開発します。それには、開発環境のセットアップ、製品の体験、および {{ site.data.keys.product }} 8.0 オファリングと統合することによる価値の追加が含まれます。<br/><br/>

<div class="container-fluid">
<ul class="nav nav-pills" id="quickstartTab">
  <li class="nav-item">
    <a class="nav-link active" id="basic-tab" data-toggle="tab" href="#basic" role="tab" aria-controls="basic" aria-selected="true"><h2 class="no-anchor">基本的なセットアップ</h2></a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="quick-start-tab" data-toggle="tab" href="#quick-start" role="tab" aria-controls="quick-start" aria-selected="false"><h2 class="no-anchor">クイック・スタート</h2></a>
  </li>
  <li class="nav-item">
    <a class="nav-link" id="advanced-tab" data-toggle="tab" href="#advanced" role="tab" aria-controls="advanced" aria-selected="false"><h2 class="no-anchor">上級</h2></a>
  </li>
</ul>
<div class="tab-content" id="quickstartTabContent">
  <div class="tab-pane fade in active" id="basic" role="tabpanel" aria-labelledby="basic-tab">
    <p>以下のセクションは、モバイル・アプリまたは Web アプリを開発するためのフレームワークとして React Native を選択した開発者が React Native アプリで <a target="_blank "href="https://console.bluemix.net/catalog/services/mobile-foundation">IBM Mobile Foundation</a> SDK の使用を始めるのを支援します。</p>

    <p>アプリケーションの作成には、任意のコード・エディター (Atom.io、Visual Studio Code、Eclipse、IntelliJ、その他) を使用できます。</p>

    <!--<p><b>Prerequisite:</b> As you setup your Ionic development environment, make sure to also read the <a target="_blank "href="https://mobilefirstplatform.ibmcloud.com/tutorials/en/foundation/8.0/installation-configuration/development/mobilefirst">Setting up the MobileFirst development environment</a> tutorial.</p>-->
<h2><font color="DodgerBlue">ステップ 1:</font> React Native CLI のインストール</h2>
    <p>React Native 開発を始めるために必要な最初のステップは、<a target="_blank" href="https://facebook.github.io/react-native/docs/getting-started.html#the-react-native-cli">React Native CLI</a> をインストールすることです。</p>

    <p>React Native CLI をインストールするには、次のようにします。</p>

    <p><a target="_blank" href="https://nodejs.org/en/">NodeJS</a> をダウンロードしてインストールします。</p>
    <p>コマンド・ライン・ウィンドウから以下のコマンドを実行します。</p>
    {% highlight bash %}
    npm install -g react-native-cli
   {% endhighlight %}

   <p><a  target="_blank" href="https://facebook.github.io/react-native/docs/getting-started.html">React Native 資料の「Getting Started」ページ</a>の説明に従って、ご使用のマシンを React Native 開発用にセットアップします。</p>
   <p>これには、Android および iOS に必要なセットアップが含まれています。</p>

   <h2><font color="DodgerBlue">ステップ 2:</font> MobileFirst 開発環境のセットアップ</h2>
   <p>React Native CLI をインストールした後、MobileFirst 開発環境をセットアップします。詳しくは、MobileFirst 開発環境のセットアップについてのチュートリアルである <a target="_blank "href="{{site.baseurl}}/tutorials/en/foundation/8.0/installation-configuration/development/mobilefirst">MobileFirst 開発環境のセットアップ</a>を参照してください。</p>
   <br/>
   <blockquote>React Native SDK を使用した開発を素早く開始する方法を学ぶには、<font color="DodgerBlue">「クイック・スタート」</font>タブに移動してください。</blockquote>

  </div>
  <div class="tab-pane fade" id="quick-start" role="tabpanel" aria-labelledby="quick-start-tab">
    <p>MobileFirst Platform Foundation 上で React Native を使用した開発を素早く開始するには、以下のステップに従ってください。</p>
    <p>このクイック・スタート・チュートリアルの目的は、単純なエンドツーエンド・フローを説明することです。</p>
    <p><a target="_blank" href="https://github.ibm.com/MFPSamples/MFPStarterReactNative">Github</a> にサンプル・アプリケーションが用意されています。このサンプルがダウンロードされ、{{ site.data.keys.mf_server }} に登録されます。提供されるアダプター (または新規アダプター) が {{ site.data.keys.mf_console }} にデプロイされます。アプリケーション・ロジックはリソース要求を行うように変更されます。</p>
   <p><b>予期される結果: </b>{{ site.data.keys.mf_server }} を正常に ping し、アダプターを使用してデータを正常に取得する。</p>

    <!--  <h3><font color="DodgerBlue">Step 1:</font> Get the prerequisites</h3>
        <ul>
        <li>Xcode for iOS, Android Studio for Android or Visual Studio 2015 or greater for Windows 10 UWP</li>
        <li>Ionic CLI</li>
        <li><i>[Optional]</i> {{ site.data.keys.mf_cli }} <a target="_blank" href="{{site.baseurl}}/downloads">(download)</a></li>
        <li><i>[Optional]</i> Stand-alone {{ site.data.keys.mf_server }} <a target="_blank" href="{{site.baseurl}}/downloads">(download)</a></li>
      </ul>-->
    <h3><font color="DodgerBlue">ステップ 1:</font> {{ site.data.keys.mf_server }} の開始</h3>
    <p><a target="_blank" href="../bluemix/using-mobile-foundation">Mobile Foundation のインスタンスを作成済み</a>であることを確認します。あるいは、<a target="_blank" href="../installation-configuration/development/mobilefirst">{{ site.data.keys.mf_dev_kit }}</a> を使用している場合は、サーバーのフォルダーに移動し、コマンド <code>./run.sh</code> (Mac および Linux) または <code>run.cmd</code> (Windows) を実行します。</p>
    <h3><font color="DodgerBlue">ステップ 2:</font> React Native SDK の追加</h3>
    <!--<p>Open the {{ site.data.keys.mf_console }} by loading the URL: <code>http://your-server-host:server-port/mfpconsole</code> in a browser. </p>
      <ul><li>If the server is running locally, use: <code>http://localhost:9080/mfpconsole</code>. The <i>username/password</i> is <b>admin/admin</b>.</li>
        <li>If the server is running on IBM Cloud as Mobile Foundation service instance, use: <code>https://bluemix-mfp-server-hostname:443/mfpconsole</code>. The <i>username/password</i> can be obtained from the IBM Cloud Mobile Foundation Service Credentials.</li>
      </ul>

    <h4><font color="DarkTurquoise">Step 2.1:</font> Click the <b>New</b> button next to <b>Applications</b></h4>
      <ul>
       <li>Select a platform from the list of platforms: <b>Android, iOS, Windows, Browser</b></li>
       <li>Enter <b>com.ibm.mfpstarter.reactnative</b> as the <b>application identifier</b></li>
       <li>Enter <b>1.0.0</b> as the <b>version</b></li>
       <li>Click on <b>Register application</b></li>
     </ul>-->
     <!--<img class="gifplayer" alt="Register an application" src="{{site.baseurl}}/assets/tutorials/all-tutorials/register-an-application-cordova.png"/>-->
     <h4><font color="DarkTurquoise">ステップ 2.1:</font> <a target="_blank" href="https://github.com/MobileFirst-Platform-Developer-Center/MFPStarterReactNative">Github</a> からReact Native サンプル・アプリケーションをダウンロードします。</h4>
     <h4><font color="DarkTurquoise">ステップ 2.2:</font> ダウンロードした React Native サンプル・アプリケーションに React Native SDK を追加します。</h4>
     <p>React Native 用の MobileFirst SDK は <a href="https://www.npmjs.com/package/react-native-ibm-mobilefirst">NPM から React Native モジュール</a>として入手できます。</p>
     <ol>
       <li> ダウンロードした React Native プロジェクトのルートに移動し、{{ site.data.keys.product_adj }} core React Native プラグインを追加し、React Native プロジェクトのルートにディレクトリーを変更します: <code>cd MFPStarterReactNative</code></li>
       <li> NPM CLI コマンド <code>npm install react-native-plugin-name</code> を使用して、MobileFirst プラグインを追加します。<br/>
         以下に例を示します。

       {% highlight bash %}
        npm install react-native-ibm-mobilefirst --save
      {% endhighlight %}

        <blockquote>上記のコマンドは、MobileFirst Core SDK プラグインを React Native プロジェクトに追加します。</blockquote>
        </li>
     <li>すべてのネイティブ依存関係をアプリにリンクします。<br/>
       {% highlight bash %}
        react-native link
      {% endhighlight %}
      </li>
    </ol>

  </br>
    <h4><font color="DarkTurquoise">ステップ 2.3:</font> プラットフォーム固有の追加ステップ</h4>
    <p> <b> Android </b> </p></br>
    以下の行を <b>AndroidManifest.xml</b> <i>({project-folder}/android/app/src/main/)</i> に追加します。
      {% highlight xml %}
      <![CDATA[
      <manifest xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/  package="com.myapp">
        ...
        <application tools:replace="android:allowBackup"
        ...
      </application>
    ]]>
    {% endhighlight %}
  </br>
  <p> <b> iOS </b></p> </br>
    プロジェクトを XCode で開きます。プロジェクト・ナビゲーターで、mfpclient.plist を ios フォルダーからドラッグ・アンド・ドロップします。
  </br>

    <h3><font color="DodgerBlue">ステップ 3:</font> アプリケーションの登録</h3>
    <ol><li>コマンド・ライン・ウィンドウを開き、プロジェクトの特定のプラットフォームのルート (iOS または Android) に移動します。
       {% highlight bash %}
        cd ios
      {% endhighlight %}
      または
        {% highlight bash %}
        cd android
      {% endhighlight %}
      </li>
      <li>以下のコマンドを実行して、アプリケーションを登録します。
       {% highlight bash %}
        mfpdev app register
      {% endhighlight %}

      <p> リモート・サーバーを使用する場合は、<code>mfpdev server add</code> <a target="_blank" href="../application-development/using-mobilefirst-cli-to-manage-mobilefirst-artifacts/#add-a-new-server-instance">コマンドを使用</a>して、そのサーバーを追加します。

      <code>mfpdev app register</code> CLI コマンドは、まず最初に {{ site.data.keys.mf_server }} に接続してアプリケーションを登録します。各プラットフォームは {{ site.data.keys.mf_server }} 内に 1 つのアプリケーションとして登録されます。</p>
      <ul>
      <li><h5>iOS</h5>

      <p>プラットフォームが iOS の場合、アプリケーションの BundleID を指定するように求められます。<b>重要</b>: BundleID は<b>大/小文字の区別</b>があります。</p>
      <p> <b>mfpdev app register</b> CLI コマンドは、まず最初に MobileFirst Server に接続してアプリケーションを登録し、次に、MobileFirst Server を識別するメタデータを含んでいる、Xcode プロジェクトのルートにある <b>mfpclient.plist</b> 構成ファイルを更新します。</p>

      <p><b>注:</b> XCode では、プロジェクト・ナビゲーターで mfpclient.plist を ios フォルダーからドラッグ・アンド・ドロップします。このステップは iOS プラットフォームにのみ適用されます。</p>
      <li><h5>Android</h5>

      <p>プラットフォームが Android の場合、アプリケーションのパッケージ名を指定するように求められます。<b>重要</b>: パッケージ名は<b>大/小文字の区別</b>があります。</p>
     <p><b>mfpdev app register</b> CLI コマンドは、まず最初に MobileFirst Server に接続してアプリケーションを登録し、次に、Android Studio プロジェクトの <b>[project root]/app/src/main/assets/</b> フォルダーに <b>mfpclient.properties</b> ファイルを生成し、これに MobileFirst Server を識別するメタデータを追加します。</p>
    </li>
    </ul>
    </li></ol>
     <h3><font color="DodgerBlue">ステップ 4:</font> アプリケーション・ロジックの編集</b></h3>
     <ol>
       <li>任意のコード・エディターで React Native プロジェクトを開きます。</li>
         <li> <b>WLAuthorizationManager</b> クラスを <b>App.js</b> にインポートします。</li>
         {% highlight javascript %}
         import {WLAuthorizationManager, WLResourceRequest} from 'react-native-ibm-mobilefirst';
         {% endhighlight %}

         <li>プロジェクトのルート・フォルダーにある <b>App.js</b> ファイルを選択し、以下のコード・スニペットを貼り付けて既存の <code>WLAuthorizationManager.obtainAccessToken()</code> 関数を置き換えます。
         <blockquote>React Native クライアント・サイド API リファレンス (<a target="_blank" href="{{site.baseurl}}/tutorials/en/foundation/8.0/api/client-side-api/reactnative/client/">ここ</a>) を参照してください。</blockquote>

         {% highlight javascript %}
           WLAuthorizationManager.obtainAccessToken("").then(
               (token) => {
                 console.log('-->  pingMFP(): Success ', token);
                 var resourceRequest = new WLResourceRequest("/adapters/javaAdapter/resource/greet/",
                   WLResourceRequest.GET
                 );
                 resourceRequest.setQueryParameters({ name: "world" });
                 resourceRequest.send().then(
                   (response) => {
                     // Will display "Hello world" in an alert dialog.
                     alert("Success: " + response.responseText);
                   },
                   (error) => {
                     alert("Failure: " + JSON.stringify(error));
                   }
                 );
               }, (error) => {
                 console.log('-->  pingMFP(): failure ', error.responseText);
                 alert("Failed to connect to MobileFirst Server");
               });
       {% endhighlight %}
       </li>
     </ol>
  <h3><font color="DodgerBlue">ステップ 5: </font>アダプターのデプロイ</h3>
  <p><a href="../quick-start/javaAdapter.adapter">用意されているアダプター成果物</a>をダウンロードし、{{ site.data.keys.mf_console }} から<b>「アクション」 → 「アダプターのデプロイ」</b>アクションを使用してデプロイします。</p>
  <h4><font color="DarkTurquoise">ステップ 5.1: </font><b>「アクション」 → 「サンプルのダウンロード」</b>オプションを選択します。<i>Hello World</i> <b>Java</b> アダプター・サンプルをダウンロードします。</h4>
  <p>あるいは、<b>「アダプター」</b>の横にある<b>「新規」</b>ボタンをクリックします。</p>
  <p><blockquote> Maven および {{ site.data.keys.mf_cli }} がインストールされていない場合は、画面に表示される<b>「開発環境をセットアップします」</b>の説明に従ってください。</blockquote></p>
  <h4><font color="DarkTurquoise">ステップ 5.2: </font><b>コマンド・ライン</b>・ウィンドウから、アダプターの Maven プロジェクト・ルート・フォルダーに移動し、以下のコマンドを実行します。</h4>
  {% highlight bash %}
    mfpdev adapter build
  {% endhighlight %}
  <h4><font color="DarkTurquoise">ステップ 5.3: </font>ビルドが終了したら、それを {{ site.data.keys.mf_console }} から<b>「アクション」 → 「アダプターのデプロイ」</b>アクションを使用してデプロイします。アダプターは <b>[adapter]/target</b> フォルダー内にあります。</h4>
  <!--<img class="gifplayer" alt="Deploy an adapter" src="{{site.baseurl}}/assets/tutorials/all-tutorials/create-an-adapter.png"/>-->

  <!--<img src="{{site.baseurl}}/assets/tutorials/all-tutorials/cordovaQuickStart.png" alt="sample application" style="float:right"/>-->

  <h3><font color="DodgerBlue">ステップ 6: </font>アプリケーションのテスト</h3>

    <p>以下のコマンドを使用して、アプリケーションを実行します。</p>
    {% highlight bash %}
     react-native run-ios|run-android
    {% endhighlight %}

    <p>デバイスが接続されている場合は、そのデバイスにアプリケーションがインストールされ、起動されます。そうでない場合はシミュレーターまたはエミュレーターが使用されます。</p>

    <blockquote>クイック・スタートのステップについて詳しくは、<a target="_blank" href="{{site.baseurl}}/tutorials/en/foundation/8.0/quick-start/reactnative/">ここ</a>を参照してください。</blockquote>

  <h3>結果</h3>
  <ul>
    <li><b>「Ping {{ site.data.keys.mf_server }}」</b>ボタンをクリックすると、<b>Connected to {{ site.data.keys.mf_server }}</b> と表示されます。</li>
    <li>アプリケーションが {{ site.data.keys.mf_server }} に接続できる場合、デプロイした Java アダプターを使用してリソース要求呼び出しが行われます。その場合、アダプター応答がアラートに表示されます。</li>
  </ul>

  </div>
  <div class="tab-pane fade" id="advanced" role="tabpanel" aria-labelledby="advanced-tab">
  <h2>IBM MobileFirst JSONStore の React Native SDK</h2>
    IBM Mobile Foundation JSONStore は、軽量で文書志向のストレージ・システムを提供する、オプションのクライアント・サイド API です。JSONStore は JSON 文書の永続ストレージを有効にします。アプリケーション内の文書は、デバイスがオフラインの時でも JSONStore 内で使用可能です。この永続的で常に使用可能なストレージは、例えばデバイスで使用できるネットワーク接続がない時などに、ユーザーに文書へのアクセス権限を与えるのに役立ちます。

    <h3>インストール</h3>
      <p>React Native アプリケーションの IBM MobileFirst JSONStore SDKは <a href="https://www.npmjs.com/package/react-native-ibm-mobilefirst" target="_blank">IBM MobileFirst Foundation SDK</a> に依存しています。IBM MobileFirst Foundation SDK をご使用のアプリケーションに追加します。</p>
      <p>ご使用の React Native アプリケーションのフォルダーにナビゲートし、以下のコマンドを実行して、React Native アプリケーションの JSONStore SDK をインストールします。</p>
      {% highlight bash  %}
      npm install react-native-ibm-mobilefirst-jsonstore --save
      {% endhighlight %}
      <blockquote>
        サポートされるプラットフォームは Android と iOS です。
      </blockquote>

    <h3>概要</h3>
    <h4>前提条件</h4>
    <ul>
      <li>React Native アプリケーションのすべての前提条件を、必ず確認してください。React Native を初めて使用する場合は、<a href="https://facebook.github.io/react-native/docs/getting-started.html" target="_blank">React Native の概要</a>ページを参照してください。</li>
      <li><a href="https://console.bluemix.net/catalog/services/Mobile%20Foundation">IBM Cloud の Mobile Foundation インスタンス</a>または IBM Mobile Foundation サーバーの<a href="https://mobilefirstplatform.ibmcloud.com/tutorials/en/foundation/8.0/installation-configuration/" target="_blank">オンプレミス・インストール</a>。</li>
    </ul>

    <h4>React Native プロジェクトの作成</h4>
    <ol>
    <li>最初のステップは React Native プロジェクトの作成です。このアプリケーションを <code>JSONStoreApp</code> と呼びましょう。React Native CLI を使用して、新規プロジェクトを作成します。
      {% highlight bash  %}
      react-native init JSONStoreApp
      cd JSONStoreApp
      {% endhighlight %}
    </li>
    <li>MobileFirst Core SDK をインストールし、<a href="https://www.npmjs.com/package/react-native-ibm-mobilefirst" target="_blank">概要の説明</a>のとおりに実行します。</li>
    <li>IBM MobileFirst JSONStore SDK をご使用のアプリケーションに追加します。
      {% highlight bash  %}
      npm install react-native-ibm-mobilefirst-jsonstore —-save
      {% endhighlight %}
    </li>
    <li>すべてのネイティブ依存関係が React Native プロジェクトに追加されるように、プロジェクトにリンクします。
             {% highlight bash %}
        react-native link
      {% endhighlight %}
      </li>
  </ol>

  <h4>Android アプリケーションの構成</h4>
  <ul>
    <li><code><React-Native-Project>/android/app/build.gradle</code> の <code>android</code> セクションに以下の行を追加します。
    {% highlight gradle  %}
    packagingOptions{
    	exclude 'META-INF/ASL2.0'
    }
        {% endhighlight %}
  </li>
    </ul>

   <h4>JSONStore コレクションの作成</h4>
    <p>JSONStore API 使用の最初のステップは、JSONStore コレクションの作成です。</p>
    <ol>
    <li>JSONStore クラスをアプリケーションにインポートします。<code>App.js</code> を開き、他のインポート・ステートメントに以下の行を追加します。
    {% highlight bash  %}
    import {WLJSONStore, JSONStoreCollection} from 'react-native-ibm-mobilefirst-jsonstore';
    {% endhighlight %}
    </li>
    <li>コレクションを作成してオープンします。同時に複数のコレクションをオープンします。パスワードを使用したコレクションの保護や同期ポリシーのセットアップなどの拡張オプション用の <code>JSONStoreInitOptions</code> パラメーターを渡します。
    {% highlight javascript  %}
    var dogs = new JSONStoreCollection('dogs');
    WLJSONStore.openCollections(['dogs']);  // Provide the name of the collection as a string.
        {% endhighlight %}
  </li>
    </ol>

    <h4>コレクションにデータを追加</h4>
    <p>コレクションに JSON データを追加します。</p>
    {% highlight javascript  %}
    	var hachi = { "name" : "Hachiko" , "breed" : "Akita" , "country" : "Japan"};
        dogs.addData(hachi).then( ()=> {
          // Data was added to the collection successfully.
        }).catch ( (err) => {
          // Error adding data. See the err object for more information on the error
        })
        {% endhighlight %}
  <h4>コレクションからデータを照会</h4>
    <p>任意の JSONStoreCollection.find* API を使用して、コレクションを照会します。
    JSON データの拡張フィルター処理と照会に、JSONStoreQueryPart と JSONStoreQuery API を使用します。</p>
    {% highlight javascript  %}
    	dogs.findAllDocuments().then( (result) => {
           // result will have all the documents in the collection
           // E.g. [ {"json": {"name":"Hachiko","breed":"Akita","country":"Japan"},"_id":2}]
         }).catch((error) => {
            console.error ("Error finding docs " +  JSON.stringify(error));
         });
    {% endhighlight %}

    <h4>コレクションのクローズ、クリア、および破棄</h4>
    <p>コレクションをクローズすると、<code>openCollections</code> API の使用に対してコレクションがオープンするまで、その後のアクセスのために JSONStore コレクションがクローズされます。</p>
    {% highlight javascript  %}
    WLJSONStore.closeAll()
        {% endhighlight %}
  <p>コレクションをクリアするとコレクションからのすべての文書が削除されますが、破棄はされません。</p>
    {% highlight javascript  %}
    	dogs.clearCollection().then (()=>{
    		// All documents cleared successfully
         }).catch( (err) => {
           // An error occurred while clearing the collection.
         })
        {% endhighlight %}
  <p>コレクションを破棄すると、すべてのデータ、すべてのアクセサー、およびセキュリティー成果物が永続的に削除されます。一度破棄されたコレクションは復元できません。アプリケーションのすべてのコレクションは破棄されます。</p>

    {% highlight javascript  %}
    	WLJSONStore.destroy()
        {% endhighlight %}
  <h3>追加情報</h3>
    React Native アプリケーションの JSONStore について詳しくは、 <a href="../application-development/jsonstore/reactnative/">ここ</a>を参照してください。

    <h3>参照</h3>
    <ul>
    <li><a href="http://mobilefirstplatform.ibmcloud.com/tutorials/en/foundation/8.0/all-tutorials/" target="_blank">開発者センター</a></li>
    <li><a href="http://mobilefirstplatform.ibmcloud.com/tutorials/en/foundation/8.0/reactnative-tutorials/" target="_blank">概要</a></li>
    <li><a href="http://mobilefirstplatform.ibmcloud.com/tutorials/en/foundation/8.0/api/client-side-api/reactnative/jsonstore/" target="_blank">API リファレンス</a></li>
    </ul>
  </div>
</div>
</div>
