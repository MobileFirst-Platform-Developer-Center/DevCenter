---
layout: tutorial
title: Application Authenticity Protection
relevantTo: [android,ios]
show_children: true
weight: 9
relevantTo: [hybrid,ios,android,windowsphone8,windows8]
---
<br>
<p>This tutorial covers the following topics:</p>
<ul>
<li><a href="#overview">Overview</a></li>
<li><a href="#project-level">Project-level setup</a></li>
<li><a href="#environmentSpecific">Environment-specific setup</a></li>
</ul>
<h2 id="overview">Overview</h2>
<p>By issuing an HTTP request, any entity can access the HTTP services (APIs) that IBM MobileFirst Platform Foundation Server offers. As described in previous tutorials, it is possible to protect relevant services with various security tests.</p>
<p>The application authenticity check ensures that the application that tries to connect to a MobileFirst Server instance is the authentic one and was not tampered with or modified by a third-party attacker.</p>
<p>Application authenticity protection is available for:</p>
<ul>
<li>Android - native + hybrid</li>
<li>iOS - native + hybrid</li>
<li>Windows Phone 8 - hybrid only</li>
</ul>
<p>Three levels of authenticity are available:</p>
<ol>
<li>No Authenticity</li>
<li>Basic Authenticity</li>
<li>Extended Authenticity (Provides a more detailed verification and is more secured.)</li>
</ol>
<h3>Important</h3>
<ul>
<li>Application authenticity protection is <strong>not available</strong> in the MobileFirst Development Server. To test, deploy the application to a MobileFirst Server instance on a remote application server.</li>
<li>Application authenticity protection is available only to licensed installations of MobileFirst Server.</li>
</ul>
<h3>Set up</h3>
<p>To set up application authenticity protection, you go through the following 2 steps:</p>
<ol>
<li><a href="#project-level">Project-level setup</a></li>
<li><a href="#environmentSpecific">Environment-specific setup</a></li>
</ol>
<h2 id="project-level">Project-level setup</h2>
<h3 id="authenticityProtectionCheckFlow">Authenticity protection check flow</h3>
<p><img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/09_15_check_flow.png"/><br />
The challenge token is processed by compiled native code, so that third-party attackers cannot see the logic of this processing.</p>
<p>Application authentication is based on certificate keys that are used to sign application bundles.<br />
Only the developers or the enterprise who have the original private key that was used to create the application are able to modify, repackage, and re-sign the bundle.</p>
<h3 id="enablingAuthenticityProtection">Enabling application authenticity protection</h3>
<p>Whether you want Basic or Extended authenticity protection, the following setup steps are required.<br />
Extended authenticity protection requires additional steps, as explained in the <a href="#enablingExtendedApplicationAuthenticityProtection">Enabling extended protection</a> section.</p>
<h4>Modify the <code>authenticationConfig.xml</code> configuration file</h4>
<ol>
<li>Add the relevant authentication realm to a security test.
<ul>
<li>If a <code>mobileSecurityTest</code> is used, add the <code>testAppAuthenticity</code> child element to it:<br />
{% highlight xml linenos %}
<mobileSecurityTest name="MyMobileAuthenticityTest">
    <testAppAuthenticity/>
    <testDeviceId provisioningType="none" />
    <testUser realm="myMobileLoginForm" />
</mobileSecurityTest>
{% endhighlight %} 
</li>
<li>If a <code>customSecurityTest</code> is used, add the <code>wl_authenticityRealm</code> realm to it:<br />
{% highlight xml linenos %}
<customSecurityTest name="MyCustomAuthenticityTest" >
    <test realm="wl_authenticityRealm" step="1"/>
    <test realm="wl_anonymousUserRealm" isInternalUserID="true" step="1"/>
    <test realm="wl_deviceNoProvisioningRealm" step="2" isInternalDeviceID="true"/>
</customSecurityTest>
{% endhighlight %} 
</li>
</ul>
</li>
<li>After you have configured the authenticity realm and security check, go to <a href="#environmentSpecific">Environment-specific setup</a> and select your environment to complete the authenticity configuration.</li>
</ol>
<h3 id="enablingExtendedApplicationAuthenticityProtection">Enabling extended application authenticity protection</h3>
<p>To enable extended authenticity checking, you must deploy a modified <code>.wlapp</code> file, instead of the original <code>.wlapp</code> file that is generated by the build process.</p>
<ol>
<li>Modify the <code>.wlapp</code> file by using the <code>wladm</code> program or the <code>wladm</code> Ant task: </li>
<ul>
<li><strong>By using the <code>wladm</code> program</strong><br />
Use the <code>wladm</code> program (provided in the MobileFirst installation directory) to run the <code>enable extended-authenticity</code> command:<br />
{% highlight java linenos %}
wladm enable extended-authenticity src-wlapp-file device-file > dest-wlapp-file
{% endhighlight %} <br />
<em>src-wlapp-file</em>  => Original binary app file (.wlapp)<br />
<em>device-file</em>     => Binary mobile app file (.apk, .ipa, or .xap)<br />
<em>dest-wlapp-file</em> => Output binary app file (.wlapp)</p>
<p>After running the <code>wladm</code> , deploy the output file to MobileFirst Server instance.</p>
</li>
<li><strong>By using the <code>wladm</code> Ant task</strong><br />
Use the <code>wladm</code> Ant task (provided in the MobileFirst installation directory) to run the <code>enable-extended-authenticity</code> command:<br />
{% highlight xml linenos %} 
<enable-extended-authenticity srcwlappfile="original-.wlapp-file"
    devicefile="device file(.apk, .ipa, or .xap)"
    destwlappfile="output-.wlapp-file"/>
{% endhighlight %} 
  </li>
</ul>
<li>After running the <code>wladm</code> command or Ant task, deploy the output file to MobileFirst Server instance.</li>
<blockquote><p>For more information, see the topic about configuring extended app authenticity checking in the user documentation.</p></blockquote>
</ol>
<h3 id="checkAuthenticityLevel">Check the application authenticity level by using the MobileFirst Operations Console</h3>
<p>You can use the MobileFirst Operations Console to see the authenticity level of an application.<br />
<img alt="missing_alt" src="{{ site.baseurl }}/assets/backup/ExtendedAuthenticityIMG2.png"/> Check authenticity level through MobileFirst Console[/caption]</p>

<h2 id="environmentSpecific">Environment-specific setup</h2>
<p>For basic authenticity, the following steps are required.<br />
For extended authenticity, it is recommended to make these extra configuration changes.</p>
